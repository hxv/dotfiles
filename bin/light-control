#!/usr/bin/env bash

cmd="pkexec xfpm-power-backlight-helper"

maxLevel=$($cmd --get-max-brightness)
currentLevel=$($cmd --get-brightness)

min=500
step=2000

if [[ "$1" == "current" ]]; then
    echo "scale=2; $currentLevel / $maxLevel * 100" | bc -l | cut -d '.' -f 1
elif [[ "$1" == "up" ]]; then
    $cmd --set-brightness $(echo "scale=2; new = $currentLevel + $step; if (new >= $maxLevel) $maxLevel else new" | bc -l)
elif [[ "$1" == "down" ]]; then
    $cmd --set-brightness $(echo "scale=2; new = $currentLevel - $step; if (new <= $min) $min else new" | bc -l)
fi

